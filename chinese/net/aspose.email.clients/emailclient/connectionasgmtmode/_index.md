---
title: ConnectionAsgmtMode
second_title: Aspose.Email for .NET API 参考
description: 获取或设置定义多线程环境中连接分配模式的值 有以下连接类型 - 主连接是与邮件客户端一起创建和处理的连接不能手动创建或处理 - 默认连接是某些线程的默认连接 如果默认连接存在且 ConnectionAsgmtMode 允许则在此线程中执行的电子邮件客户端的所有方法都将隐式使用此连接 每个线程只能存在一个默认连接它可以手动或自动创建它取决于 EmailClient.ConnectionAsgmtMode 属性 这些连接可以使用 EmailClient.CreateConnectioncreateAsDefaultConnection  true 方法手动创建 如果不使用默认连接取决于连接分配模式则隐式使用主连接而不是它 - 独立连接是未链接到线程的连接它们可以手动创建并且必须显式用作方法参数 可以使用 EmailClient.CreateConnection 方法或 EmailClient.CreateConnectioncreateAsDefaultConnection  false 方法手动创建这些连接 有以下连接分配类型 - ConnectionAsgmtType.UseMainOrDefault 此模式在电子邮件客户端中默认使用 如果默认连接尚未创建或者连接未作为方法参数显式传递则电子邮件客户端对来自多个线程的所有操作使用主连接 主连接是与电子邮件客户端一样同时创建的连接 用户可以使用 CreateConnection 方法为线程创建默认连接 如果创建了线程的默认连接它会隐式用于在此线程中调用的电子邮件客户端的所有方法 如果未创建线程的默认连接则主连接用于在此线程中调用的电子邮件客户端的所有方法 用户还可以使用 CreateConnection 方法创建未与线程链接的连接不是默认连接 如果用户想要使用其他连接不是主连接也不是默认连接他必须将此连接显式传递为他想要使用的方法的参数 用户可以另外创建任意数量的连接每个线程只能有一个默认连接 请注意如果用户使用 Thread 对象进行多任务编程默认连接可以正常工作 如果用户使用 ConnectionPool 或使用 Task 对象进行多任务编程这种模式可能会导致程序的错误行为 为避免此问题用户必须在线程中执行的代码末尾手动处理默认连接如果他使用它 - ConnectionAsgmtType.UseMain 电子邮件客户端对来自多个线程的所有操作使用主连接 主连接是与电子邮件客户端一样同时创建的连接 用户无法创建默认连接 用户可以使用 CreateConnection 方法创建未与线程链接的连接不是默认连接 如果用户想要使用其他连接不是主连接也不是默认连接他必须将此连接显式传递为他想要使用的方法的参数 用户可以另外创建任意数量的连接 - ConnectionAsgmtType.UseDefault 电子邮件客户端对来自多个线程的所有操作隐式仅使用默认连接在此模式下不使用主连接 如果尚未为某个线程创建默认连接第一次调用电子邮件客户端方法则 电子邮件客户端在执行第一个操作之前为线程隐式创建默认连接 用户无法使用 CreateConnection 方法为线程创建默认连接因为它们是自动创建的 当创建线程的默认连接时它被隐式地用于在这个thread.read中调用的电子邮件客户端的所有方法 用户还可以使用 CreateConnection 方法创建未与线程链接的连接不是默认连接 如果用户想要使用其他连接不是主连接也不是默认连接他必须将此连接显式传递为他想要使用的方法的参数 用户可以另外创建任意数量的连接每个线程只能有一个默认连接 请注意如果用户使用 Thread 对象进行多任务编程默认连接可以正常工作 如果用户使用 ConnectionPool 或使用 Task 对象进行多任务编程这种模式可能会导致程序的错误行为 为避免此问题用户必须在线程中执行的代码末尾手动设置默认连接
type: docs
weight: 30
url: /zh/net/aspose.email.clients/emailclient/connectionasgmtmode/
---
## EmailClient.ConnectionAsgmtMode property

获取或设置定义多线程环境中连接分配模式的值 有以下连接类型: - 主连接是与邮件客户端一起创建和处理的连接。不能手动创建或处理。 - 默认连接是某些线程的默认连接。 如果默认连接存在且 ConnectionAsgmtMode 允许，则在此线程中执行的电子邮件客户端的所有方法都将隐式使用此连接。 每个线程只能存在一个默认连接。它可以手动或自动创建。它取决于 EmailClient.ConnectionAsgmtMode 属性。 这些连接可以使用 EmailClient.CreateConnection(createAsDefaultConnection = true) 方法手动创建。 如果不使用默认连接（取决于连接分配模式），则隐式使用主连接而不是它。 - 独立连接是未链接到线程的连接。它们可以手动创建，并且必须显式用作方法参数。 可以使用 EmailClient.CreateConnection() 方法或 EmailClient.CreateConnection(createAsDefaultConnection = false) 方法手动创建这些连接。 有以下连接分配类型: - ConnectionAsgmtType.UseMainOrDefault 此模式在电子邮件客户端中默认使用。 如果默认连接尚未创建，或者连接未作为方法参数显式传递，则电子邮件客户端对来自多个线程的所有操作使用主连接。 主连接是与电子邮件客户端一样同时创建的连接。 用户可以使用 CreateConnection 方法为线程创建默认连接。 如果创建了线程的默认连接，它会隐式用于在此线程中调用的电子邮件客户端的所有方法。 如果未创建线程的默认连接，则主连接用于在此线程中调用的电子邮件客户端的所有方法。 用户还可以使用 CreateConnection 方法创建未与线程链接的连接（不是默认连接）。 如果用户想要使用其他连接（不是主连接，也不是默认连接），他必须将此连接显式传递为他想要使用的方法的参数。 用户可以另外创建任意数量的连接。每个线程只能有一个默认连接。 请注意，如果用户使用 Thread 对象进行多任务编程，默认连接可以正常工作。 如果用户使用 ConnectionPool 或使用 Task 对象进行多任务编程，这种模式可能会导致程序的错误行为。 为避免此问题，用户必须在线程中执行的代码末尾手动处理默认连接（如果他使用它）。 - ConnectionAsgmtType.UseMain 电子邮件客户端对来自多个线程的所有操作使用主连接。 主连接是与电子邮件客户端一样同时创建的连接。 用户无法创建默认连接。 用户可以使用 CreateConnection 方法创建未与线程链接的连接（不是默认连接）。 如果用户想要使用其他连接（不是主连接，也不是默认连接），他必须将此连接显式传递为他想要使用的方法的参数。 用户可以另外创建任意数量的连接。 - ConnectionAsgmtType.UseDefault 电子邮件客户端对来自多个线程的所有操作隐式仅使用默认连接。在此模式下不使用主连接。 如果尚未为某个线程创建默认连接（第一次调用电子邮件客户端方法），则 电子邮件客户端在执行第一个操作之前为线程隐式创建默认连接。 用户无法使用 CreateConnection 方法为线程创建默认连接，因为它们是自动创建的。 当创建线程的默认连接时，它被隐式地用于在这个thread.read中调用的电子邮件客户端的所有方法。 用户还可以使用 CreateConnection 方法创建未与线程链接的连接（不是默认连接）。 如果用户想要使用其他连接（不是主连接，也不是默认连接），他必须将此连接显式传递为他想要使用的方法的参数。 用户可以另外创建任意数量的连接。每个线程只能有一个默认连接。 请注意，如果用户使用 Thread 对象进行多任务编程，默认连接可以正常工作。 如果用户使用 ConnectionPool 或使用 Task 对象进行多任务编程，这种模式可能会导致程序的错误行为。 为避免此问题，用户必须在线程中执行的代码末尾手动设置默认连接。

```csharp
public virtual ConnectionAsgmtType ConnectionAsgmtMode { get; set; }
```

### 也可以看看

* enum [ConnectionAsgmtType](../../connectionasgmttype)
* class [EmailClient](../../emailclient)
* 命名空间 [Aspose.Email.Clients](../../emailclient)
* 部件 [Aspose.Email](../../../)

<!-- DO NOT EDIT: generated by xmldocmd for Aspose.Email.dll -->
